# （金融庁共催）第３回金融データ活用チャレンジ

コンペURL: https://signate.jp/competitions/1515

## 概要
本コンペティションは、企業のESGレポートや統合報告書に含まれる膨大な情報をもとに、RAG（Retrieval Augmented Generation）技術を活用して、質問に対する自動かつ正確な回答生成を目指す取り組みです。
参加者は、J-LAKEおよびパートナー企業DATAZORAのKIJIサービス提供データを利用し、提供された質問（query.csv）に対して最適な回答を生成するシステムの構築に挑戦します。

## 目次
- [コンペティションの背景と目的](#コンペティションの背景と目的)
- [アーキテクチャ概要](#アーキテクチャ概要)
- [環境構築・セットアップ方法](#環境構築・セットアップ方法)
- [実行方法・使用例](#実行方法・使用例)
- [テストおよび評価結果](#テストおよび評価結果)
- [今後の展望と改善点](#今後の展望と改善点)

## コンペティションの背景と目的
近年、企業の持続可能性や社会的責任への関心が高まる中、ESGレポートや統合報告書は企業の透明性や信頼性を示す重要な情報源として注目されています。
しかし、これらの報告書には膨大なデータや詳細な情報が含まれており、関係者が必要な情報を迅速かつ的確に抽出することは容易ではありません。
そこで、本コンペティションでは、RAG技術を活用することで、報告書から有用な情報を自動的に抽出し、ユーザーの質問に対して正確な回答を生成するシステムの開発を促進することを目的としています。

## アーキテクチャ概要
- **システム構成図:**

 ![スクリーンショット 2025-02-13 15.43.40.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3687042/1abfb033-1a31-4e1c-8998-68de0614be46.png)

- **使用技術・ライブラリ:**

  - LangChain(faiss)
  - Azure OpenAI API
  - OpenAI API
  - Document intelligence
  - pytorch
  - PyPDF2
  - pdf2image

## 環境構築・セットアップ方法
### 前提条件
- **Git** がインストール済みであること
- **Docker** および **Docker Compose**（利用する場合）がインストール済みであること

### 手順

1. **リポジトリのクローン**

下記のコマンドを実行してリポジトリをクローンし、作業ディレクトリに移動します。

```bash
git clone https://github.com/Yoshiki0418/financial-data-challenge.git
cd financial-data-challenge
```

2. Dev Containers を利用してプロジェクトを開く

VSCode を起動し、[ファイル] > [フォルダーを開く] からクローンしたリポジトリのルートディレクトリを開きます。
コマンドパレットを開き、「Remote-Containers: Reopen in Container」を実行します。
Dev Container の構築および起動が自動的に行われ、コンテナ内での開発環境が整います。

## テストおよび評価結果

- **評価方法:**
  - 各質問に対する回答の質を測定する方法で評価します。
  - 回答は、以下の基準でLLM(gpt-4o)によって「Perfect」「Acceptable」「Missing」「Incorrect」のいずれかに分類され、得点が付与されます。
  - 得点の合計を質問数で割った平均値がスコアとなります。
  - スコアは、-1(全てIncorrect) から 1(全てPerfect)の範囲で出力されます。
  - スコアは、回答を投稿いただいた後に、LLMによる評価を1度だけ実行した結果を元にします。
  - temperatureは0に設定してシードも固定していますが、微妙な回答内容の場合はLLMの判断に僅かなゆらぎが発生することがあります。
  - 本問題は日本語以外の回答も可能ですが、すべて日本語で回答することを前提としています。
 
| 分類       | 得点 | 評価基準                                                                 |
| ---------- | ---- | ------------------------------------------------------------------------ |
| Perfect    | 1    | 質問に対して正確に答え、虚偽の内容が含まれていない回答。                                 |
| Acceptable | 0.5  | 質問に対して有用な答えを提供しているが、答えの有用性を損なわない程度の軽微な誤りが含まれている回答。 |
| Missing    | 0    | 質問に対して「わかりません」「見つけられませんでした」などの具体性が含まれない回答。             |
| Incorrect  | -1   | 質問に対して間違った、または誤誘導の回答。                                           |

※参考：[CRAG](https://arxiv.org/abs/2406.04744)

## 今後の展望と改善点

ファインチューニング: 現在利用している言語モデルのパラメータやハイパーパラメータを再調整し、より高度な文脈理解と適切な回答を実現する。
